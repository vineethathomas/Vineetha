package com.string.sorting.controller;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import com.string.sorting.model.Name;
import com.string.sorting.service.SortService;
import com.string.sorting.service.SortServiceImpl;

public class ApplicationController {
	
	private static final String REGEX = ",\\s";
	
	/*
	 * Method to read file
	 * 
	 * */
	public void readFile() throws IOException {
		FileInputStream inputStream=null;
		try{
		// Getting ClassLoader obj
		   ClassLoader classLoader = this.getClass().getClassLoader();
		   // Getting resource(File) from class loader
		   File configFile=new File(classLoader.getResource("names.txt").getFile());
		   
		   inputStream = new FileInputStream(configFile);
		   BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
		   String line;
		   List<Name> names = new ArrayList<Name>();
		   
		   while ((line = reader.readLine()) != null) {
			   Name name = new Name();
			   String[] nn = line.split(REGEX); 
			   name.setFirstName(nn[1]);
			   name.setLastName(nn[0]);
			   names.add(name);

		   }
		  
		   reader.close();
		   SortService service = new SortServiceImpl();
		   names = service.sortByLastName(names);
		   
		   for(Name n: names){
			   System.out.println(n.getLastName()+", "+n.getFirstName());
		   }
		   
		   
		}catch(FileNotFoundException e) {
			
		}
		
	}
	
	public static void main(String[] args)throws IOException {
		ApplicationController a = new ApplicationController();
		a.readFile();
		
	}
	
	private List<Name>

}
